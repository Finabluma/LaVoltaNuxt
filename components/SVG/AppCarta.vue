<script setup>
  const { gsap, ScrollTrigger } = useGsap()
  function heartBeat() {
    gsap
      .to('#corazon', {
        duration: 1.5,
        drawSVG: '20% 20%',
        transformOrigin: 'center center',
        yoyo: true,
        repeat: -1,
      })
      .timeScale(0.5)
  }

  function wordTl() {
    let tl = gsap
      .timeline({ paused: true })
      .to('#word', {
        y: '+=20',
        autoAlpha: 0,
      })
      .to(
        '#trazado',
        {
          y: '-=20',
          autoAlpha: 0,
        },
        '0'
      )
      .to(
        '#corazon',
        {
          y: '+=30',
          scale: 2,
        },
        '-=0.5'
      )

    return tl
  }

  function smTl() {
    ScrollTrigger.create({
      id: 'stCarta',
      trigger: '.content',
      start: 'top top',
      end: 'bottom top',
      pin: true,
      pinSpacing: false,
      scrub: 1,
      snap: 1,
      animation: wordTl(),
    })
  }

  function tlMaster() {
    gsap.timeline().add(heartBeat()).add(smTl())
  }

  defineExpose({
    tlMaster,
  })
</script>
<template>
  <svg
    id="grafico"
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 694.5 212.6"
    preserveAspectRatio="xMidYMin slice"
  >
    <path
      id="corazon"
      d="M680.5,41.7c-1.5,2.8-3.4,5.3-5.7,7.5-2.5,2.5-4,5.6-5.6,8.7-.6,1.2-1.3,2.3-2,3.4-.8,1.1-1.6,1-2.4,0-1.2-1.7-7.2-18.6-7.8-19.6-.8-1.3-1.2-2.8-1.1-4.3,0-1.5.2-3,.6-4.4.4-1.7,2-2.3,3.4-2.7,2.8-.6,4.8.7,6.1,3.7.8,1.7,1.4,3.5,2.2,5.4.2-.2.3-.4.4-.7.4-1.1,1.4-1.9,2.5-2,3-.8,6.2-.4,8.8,1.2,1.1.5,1.3,2.5.6,3.9Z"
    />
    <path
      id="trazado"
      d="M196.2,186.7l-5.5,3.3c-1.1-1.3-3.1-2.8-2.9-4s2.5-2.6,4.2-2.9c.8-.1,2.2,1.9,4.2,3.6h0ZM177.5,176.5c-1.5.6-2.9,1.2-4.7,1.9-.7-2.4-1.4-4.5-2-6.7-4.4,5.4-1,10.2-.3,15.2l1.5.7,9.3-8.7c.3-2.5-.8-3.5-3.8-2.4ZM234.5,193.1l-5.6,3.8,5.4,4.7c1.2-1.6,3.2-3.1,3.4-4.7.2-1.2-2.1-2.6-3.2-3.8h0ZM150.2,180.7c1.5,1.6,2.6,3.8,4.6,4.7.9.4,3.3-1.4,5.1-2.1.1-.6.2-1.3.2-1.9-1.6-.9-3.1-2.5-4.7-2.6s-3.5,1.2-5.2,1.9h0ZM119,172.5c-1.1-.2-2.9,1.7-5.4,3.3,2.4,2.1,4,3.4,5.6,4.8,1.2-1.5,3.2-3,3.3-4.5,0-1.2-2-3.3-3.5-3.6ZM41.7,173.5c-.3,1.3-.7,2.7-1.4,5.1,2.8.2,4.8.6,6.5.2.5-.1,1-3.1.2-3.7-1.2-1-3.4-1.1-5.3-1.6ZM60.4,168.7l-1.7.9c0,1.6-.8,3.8.2,4.8s3.6.8,5.6,1.1c.3-1.4,1.4-3.3.7-4.2-.9-1.3-3.2-1.8-4.8-2.6ZM30.3,180.2c-2-.9-4.1-1.4-6.3-1.4-.4,0-1.7,3.3-1.4,3.5,2.7,1.3,5.5,2.3,8.4,3.2-.3-2.8.1-4.9-.7-5.3ZM6.8,180.4c-2.3.1-4.5,1.1-6.8,1.7l3,3.9,6.2-2c-.7-1.3-1.6-3.7-2.4-3.6h0ZM99,166.9l-1.4.7c.6,2.7,1.2,5.4,2.2,9.5l5.5-6.6c-4.8,2.5-5.4-.7-6.3-3.6h0ZM264,198c-1.2-.1-2.6,1.8-4.9,3.5l5.3,4.6c1.1-1,2.7-2,3.2-3.2.9-2.5-.2-4.7-3.6-4.9h0ZM77.3,167.5c-.3,1.7-.6,3.5-1.1,6.1l7.2.9c0-1.6,1.1-4,.2-4.8-1.5-1.2-4.2-1.5-6.3-2.2ZM135.5,177.1c.3,1.9,1.9,3.6,3,5.4l5-4-4.8-4.8c-1.1,1.1-3.4,2.4-3.2,3.4h0ZM181.3,178.9h.1c0-.1-.1,0-.1,0ZM486.5,180.6c.9,1.7,2.8,3,4.3,4.5,1.4-1.1,3.9-2.3,3.9-3.3,0-1.5-2-2.9-3.9-5.3-2.2,2-4.6,3.5-4.3,4.1ZM594.6,150.1c-.9,1.9-1.9,3.7-2.5,5l-7.2-2.2c1,2.1,1.7,4.4,3.1,6.3,1.3,1.2,2.8,1.9,4.5,2.3,2.1-2.1,4-4.5,5.4-7.1.5-1.2-1.1-3.1-1.8-4.6l-1.5.3ZM564.4,156.8c.2,1.6,2.2,3.1,4.3,5.5l5.4-4.5c-1.7-1.4-3.2-3.3-5.2-3.8-1.1-.3-4.6,1.9-4.5,2.8ZM519,164.1c-1.2-.1-3.8,2.2-3.7,2.6,1,2,2.8,3.7,4.9,6.3,2.2-2,4-2.9,4.2-3.9.6-3.3-2.1-4.8-5.4-5h0ZM539.4,159.3c-.8.1-2.4,2.3-2.1,2.8.9,1.2,2.6,2.1,4.9,3.7,0-2.1-.2-3.1-.3-4.2h3.8c0-.1.3-1.6.3-1.6-2.2-.5-4.4-.8-6.6-.7h0ZM692.6,110.9c-3.4,1.6-6.8,2.4-6.7,3.2.2,2.4,1,4.6,2.3,6.6.2.3,5.2-.8,5.3-1.6.4-2.2-.4-4.6-.9-8.2h0ZM615.3,152l2.3,5.5,1.8,2.1c1.3-1,3.7-2.2,3.6-3.1-.3-2.1-1.3-4-2.8-5.5-.5-.4-3.2.7-4.9,1h0ZM659.5,128.8c1.3,2.1,2.2,4.5,4,6.1.8.7,3.6-.4,5.4-.8l-3.9-7.7c-2.6,1.2-4.1,1.8-5.5,2.4ZM634,143c1,2,1.8,4.2,3.3,5.9.3.4,4.4-.7,4.4-1.1,0-1.8-.8-3.6-1.4-6.1l-6.3,1.3h0ZM359.9,206.1c.3,1.6,1.8,3.1,2.7,4.6l5.2-5.1c-1.8-1.4-2.8-2.9-4-3.1-3-.5-4.3,1.4-3.9,3.6h0ZM343,196.3c-5.9,3.1-5.9,3.2-9.5-1.1-3.2,2.9-1.5,11.6,2.7,13,.8.3,1.7.2,2.5-.2,3.5-3.6,8.7-6.4,8-12.4-1.3,0-2.5.3-3.7.7ZM308.7,199.3c-1.3-.1-2.8,1.4-5.6,3.1,2.1,1.9,4.3,3.7,6.6,5.3.2.1,2.8-1.5,3.1-2.6.6-2.8-.2-5.5-4.1-5.8ZM287.8,198.9c-.4-.3-2.8,1.3-5.6,2.6,2.7,2.2,4.2,3.7,6.1,4.7.3.2,3.3-2,3.1-2.5-.7-1.9-2-3.6-3.6-4.8ZM375.8,205.9c.3,1.5,2.2,3,3.8,4,.3.2,2.5-1.6,4.9-3.2l-5.2-4.3c-1.3,1.2-3.7,2.6-3.5,3.5h0ZM433.5,197.9c-1-.4-4.5,1.9-4.9,3.3s1.7,3.3,3.3,6c2.9-2.2,6.2-3.7,6.1-4.8-.3-1.6-2.5-3.7-4.5-4.5ZM459,192.1c-1.4-.1-4.1,1.3-4.3,2.2-.7,3.6,2.4,4.7,7.4,5.4.7-.6,2.9-1.6,3.2-2.9.7-3.8-3.2-4.4-6.3-4.7h0ZM401.2,200.9c-1.1,1.5-2.9,2.9-3.3,4.5-.7,3.2,1.9,4.8,5.2,5.3,4.2.6,3.9-2.2,4.2-4.4.6-3.3-1.7-4.3-6.1-5.4h0ZM223,33.3c-1-.4-1.6-.5-1.8.8l1.4.5c.2-.6.3-.9.4-1.3h0ZM218.3,33.6c.3,0,.4-.6.6-1-1.2-.4-1.6-.8-2.3.8.6.1,1.1.2,1.7.2ZM227.6,35c-.5-.1-1-.2-1.5-.2-.1,0-.1.5-.2.8.9.2,1.2.4,1.7-.6ZM254.7,107.3c.7,8.6-9.4,16-17.7,14.5-1.2,8.1-2.9,16.1-5.2,24,3.2-4.8,13.1-12.1,17.9-6.6-1.6,4.5-3.9,9.4-8.2,11.8-7.6,5.6-12.4.2-12,4.3-.1,9.5-13.6,37.6-12.9,38.3-5.9,7-8.6.6-8.6-.9s2.1-2.6,3.3-3.9c.2.2,13.6-20.5,14.7-31.7,2.2-11.1-11.4-5.5-15.6-24,8-1.8,17.8,2.7,18.1,11.6,14.3-38.4-1.8-12.4-13-32.6-.3-1.4-2.4-3.9-.2-4.5,7.3-1.6,15.8,1.2,19.5,8.1,1.7-8.6-.4-17.8-3.6-25.9-1.1-2.1-4.1.1-6-.2-4.5.6-9-.9-12.2-4.1-3.1-3.8,6.7-5,9.1-4.2,3,.3,5.3,1.6,7.8,3.3-1.7-7.5-6.9-26.7-13.4-30.3-9.4,3-14.4-11.3-6.2-15.9,10.9-10.8,30,5.3,12.6,12.7-2.9,5.7,3.3,11.5,4.7,17,1,3.6,2.3,7.2,3.4,10.8.5,1.4.8,2.9,1.2,4.4h.4c1-5.2,5.3-10.5,11.2-9.7,4.7,3.1-5.1,13.7-9.7,13.4-1,.1-.8.8-.6,1.4,3.5,9.2,5.2,19.3,3.6,29l.3.2c3.7-5.8,8.2-12.5,16-12,1.2,0,1.5.5,1.3,1.7h0ZM220.6,43c-4.1-1.3-9.5,2.6-8.9,6.8h.4c.4-2.8,1.9-4.7,4.9-5.2,3.5-.6,5.1,1.5,6.2,4.6,2-2.5-.2-5.2-2.6-6.2h0ZM208.9,45.6c3.6-7.2,15.4-10.1,19.9-2.3-1.2-13.2-26-6.2-20.9,5.8.2-1.2.5-2.4,1-3.5ZM213.6,53.7c-4.9-3.1-2.9-9.2,1.8-11.2,4.3-2.9,11.3,1.5,9.4,6.8,5.5-1.7,3.7-8.8-1.3-9.4-8.9-3.5-20.7,9.6-10,14.1v-.3ZM216.1,46.1c-2.2,1.1-2.1.6-2.7,3.1-.6,1.3,1.1,2.3,1.7,3.3.5.4,1.8,0,2.3,0,.7-1.7.9-2.8,3.1-2.2,4.3-1.7-2.2-7-4.4-4.2h0ZM214.6,34.4c.3-1.6.1-2-1.3-1.9-.8,1,.1,1.4,1.3,1.9ZM208.8,35.4l.2.5c4.2.3,1.2-3.8-.2-.5Z"
    />
    <path
      id="word"
      d="M620.3,29.2c12.2,7.6,16.7,23.3,22,35.3,3.7,5.2,1.1,14.3,8.9,15.4-18.1,20.7-27.1-6.6-30.1-20.8-11.5,19.3-20,25.5-22-2.8-19-16.1,4.4-35.4,21.2-27.1h0ZM612.7,42.9c-6.9,8.3-6.7,22.7-3.9,25,10.6-1.4,15.7-20.1,3.9-25ZM533.8,1.2c-9.7,56.2,41.6,16.3,27.7,33-36.1,6.3-28.7-1.1-23.8,44.9.4,16.5,47.5-27.4,56-31.6,2.5,1.8-14.3,11.8-17,16.7-6,7.2-6.5,18.2-14.7,24.3-8.9,18.2-47.8,6.6-45.6-15.8-2.2-40.3,19.8-30.8-23-41.8,4.1-5.5,20.7,1.3,27.8-.5,6.1-5,5.2-37,12.6-29.2ZM453.1,24.4c-11.9,34.8,23.7,0,29.8,22.9,3.1,13.3.1,23.3,1.8,35.3.4,2.3,3.3,7,.4,9.9-11.6,6.8-23.6-11-25.4-26.1-1.2-16.6,4.9-18.7-13.6-23.6-.7,2.4-5.8,6.4-7.3,6.2,1.8-1.4,5.8-6.3,6-8.7-4.2-4.5,4.7-24.5,8.3-15.9h0ZM449,28.2c-.4,1.5-1.5,4.8-.5,6.4.8-1.7,4.3-6.9.5-6.4ZM381.8,30.3c30.6-8.6,21.4,44.2,41.9,31,5.1-3.5,14-13.4,17-13.3-12.9,9.2-11.2,20.4-22.2,27.3-22.7,5.8-19.2-16.1-25.9-33-3.2,13.1-6.6,47.7-22.5,28-21.5-8.8-8.1-39,11.7-40ZM377.4,46.3c-4.5,3.4-4.8,11-.9,15.2,14.8,4.7,21.1-39.4.9-15.2ZM283.4,36c.2,1.1-2.3,5.1-2.3,2.3-6.2-10-16,16.8-14.2,23.6,6.1,55.3,60.3,9.3,85.6-8,22.5-17.4-15.7,14.6-21.6,19.3-84.3,65.8-85.7-42.6-47.5-37.2ZM183.2,39.9c4.6-3.4-2.1,23.8,1.2,28.7-1.7,7.3,15.3,11.6,4.8,12.8-16.3,5.9-9.5-37.8-20.9-7.6-43.5,52.2-62.9-63.4,14.9-33.9ZM158.9,49.8c-16,4.6-7.5,20.3.5,26.6,10-1.3,19.7-33.8-.5-26.6ZM88.3,14.2c-14.3-37.3-27.3,77.6-10.9,41.9,5.6-8.7,6.9-37.5,10.5-38.6-3.8,14.8-3.8,32.6-12,46.4-5.6,3.3-3.3,8.6-2.2,14.7,5.1,15.1,1.2,35.7,21.9,37,12.7,4.9,92.2.3,29.3,31.2-34.2,3.6-78.9-18.3-62.1-57.5,1.3-13.2,0-24.6,1.2-38.4-.5-11.7,16.2-66.4,24.3-36.7Z"
    />
  </svg>
</template>
<style lang="postcss" scoped>
  #grafico {
    #word,
    #trazado {
      @apply fill-neutral-content/90  stroke-neutral
      dark:fill-neutral-content/70 dark:stroke-neutral-content/50;
    }

    /* #corazon {
      @apply fill-red-600 stroke-2 stroke-red-500;
    } */
  }
</style>
